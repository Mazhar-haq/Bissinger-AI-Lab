<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bissinger's Herald Square Truffle Tracker</title>
    <link rel="stylesheet" href="layout.css">
</head>
<body onload="init()">

    <div id="toast" class="toast">Action Complete</div>

    <div class="header">
        <button class="settings-btn" onclick="toggleGuide()">üìñ Help</button>
        <h1>Bissinger's Truffle Tracker</h1>
        <p id="displayDate" style="font-size: 0.8rem; opacity: 0.8;"></p>
    </div>

    <div id="guide" class="card" style="display: none;">
        <div class="guide-section">
            <h3>‚òÄÔ∏è Morning Shift</h3>
            <p style="font-size: 0.75rem; margin-bottom: 5px;">Enter counts in <b>AM</b> column. Click <b>Lock AM</b> when done.</p>
        </div>
        <div class="guide-section">
            <h3>üîÑ Refill Column</h3>
            <p style="font-size: 0.75rem; margin-bottom: 5px;"><b>Sold</b> = (AM ‚àí PM) + Refill</p>
        </div>
        <button onclick="toggleGuide()" class="close-guide-btn">CLOSE GUIDE</button>
    </div>

    <div class="card">
        <div class="input-grid">
            <div class="input-group">
                <label>Date</label>
                <input type="date" id="trackingDate" onchange="updateDateDisplay(); saveData();">
            </div>
            <div class="input-group">
                <label>Opening MOD</label>
                <select id="openingMod" onchange="saveData()">
                    <option value="">Select...</option>
                    <option>Arin</option><option>Czar</option><option>Faith</option><option>Gully</option><option>Associate</option>
                </select>
            </div>
            <div class="input-group">
                <label>Closing MOD</label>
                <select id="closingMod" onchange="saveData()">
                    <option value="">Select...</option>
                    <option>Arin</option><option>Czar</option><option>Faith</option><option>Gully</option><option>Associate</option>
                </select>
            </div>
        </div>
        <div style="display: flex; gap: 8px; margin-top: 15px;">
            <button id="lockAmBtn" class="primary-btn" onclick="lockAM()">Lock AM Counts</button>
            <button class="info-btn" onclick="openReport()">üìã Report</button>
            <button class="success-btn" onclick="window.print()">üñ®Ô∏è PDF</button>
        </div>
        <div style="margin-top: 10px;">
            <button class="reset-btn" onclick="confirmReset()">Clear All Today's Data</button>
        </div>
    </div>

    <div class="floor-tabs">
        <button class="tab-btn active" id="btn-f6" onclick="switchFloor('f6')">6th Floor Case</button>
        <button class="tab-btn" id="btn-f1" onclick="switchFloor('f1')">1st Floor Case</button>
    </div>

    <div id="f6-view" class="floor-view active">
        <div class="card" style="padding: 5px;">
            <div class="table-container">
                <table id="f6Table">
                    <thead>
                        <tr>
                            <th style="width: 40%;">Flavor</th>
                            <th>AM</th>
                            <th>Refill</th>
                            <th>PM</th>
                            <th>Sold</th>
                            <th>End</th>
                        </tr>
                    </thead>
                    <tbody id="f6Body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="f1-view" class="floor-view">
        <div class="card" style="padding: 5px;">
            <div class="table-container">
                <table id="f1Table">
                    <thead>
                        <tr>
                            <th style="width: 40%;">Flavor</th>
                            <th>AM</th>
                            <th>Refill</th>
                            <th>PM</th>
                            <th>Sold</th>
                            <th>End</th>
                        </tr>
                    </thead>
                    <tbody id="f1Body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="summary-footer">
        <div class="summary-stats">
            <div class="summary-item">
                <span style="font-size: 0.6rem;">F6 STOCK</span>
                <span class="summary-val" id="total-f6">0</span>
            </div>
            <div class="summary-item">
                <span style="font-size: 0.6rem;">F1 STOCK</span>
                <span class="summary-val" id="total-f1">0</span>
            </div>
            <div class="summary-item">
                <span style="font-size: 0.6rem;">GRAND TOTAL</span>
                <span class="summary-val" id="total-grand" style="color:white; border-bottom: 2px solid var(--bissingers-gold);">0</span>
            </div>
        </div>
        
        <div class="top-sellers-panel">
            <div class="top-sellers-title">üèÜ Top Sellers Today</div>
            <div id="topSellersList" class="top-sellers-grid">
                <div class="seller-badge" style="opacity: 0.5;">Enter PM counts to track...</div>
            </div>
        </div>
    </div>

    <div id="reportModal" style="display:none;" class="modal-overlay">
        <div class="modal-content">
            <h3>Report Generation</h3>
            <button class="info-btn" onclick="generateReport('am')">Copy AM Report</button>
            <button class="primary-btn" onclick="generateReport('pm')">Copy PM Report</button>
            <button class="cancel-btn" onclick="closeReport()">Cancel</button>
        </div>
    </div>

    <script src="tracker-logic.js"></script>
</body>
</html>
